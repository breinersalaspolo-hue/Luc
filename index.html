<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Animación — Lucas el más lindo → Bleesd contigo</title>
  <style>
    :root{
      --bg1:#060a18;
      --ink:#eaf6ff;
      --blue:#4cc7ff;
      --blue2:#2ea0ff;
      --glow:#6bd7ff;
    }
    body{
      margin:0;
      height:100vh;
      background:radial-gradient(1200px 600px at 50% 110%, #0d1430 0%, #060a18 55%, #030711 100%);
      overflow:hidden;
      font-family:system-ui, sans-serif;
      color:var(--ink);
    }
    .stage{position:relative;width:100%;height:100%}
    .gate{position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.4);z-index:50}
    .gate button{padding:12px 22px;border:none;border-radius:12px;background:#111;color:#fff;font-weight:700;cursor:pointer}

    /* Diamantes */
    .char{position:absolute;bottom:8%;width:120px;height:120px;display:flex;align-items:center;justify-content:center}
    .diamond{width:80px;height:80px;background:linear-gradient(145deg,var(--blue),var(--blue2));transform:rotate(45deg);box-shadow:0 0 20px var(--glow),0 0 40px var(--blue2)}
    .left{left:5%}
    .right{right:5%}

    /* Letras */
    .letter{position:absolute;font-weight:800;font-size:clamp(26px,5vw,64px);opacity:0;transform:translate(-50%,-50%) scale(.7);
      text-shadow:0 0 10px var(--blue2),0 0 20px var(--glow);
      transition:opacity .35s ease,transform .45s ease}
    .letter.show{opacity:1;transform:translate(-50%,-50%) scale(1)}

    /* Flamas */
    .flame{position:absolute;width:26px;height:40px;pointer-events:none;
      background:radial-gradient(circle at 50% 80%, #fff 0%, var(--blue) 40%, var(--blue2) 70%, transparent 100%);
      clip-path:polygon(50% 0%,80% 40%,60% 100%,40% 100%,20% 40%);
      filter:drop-shadow(0 0 12px var(--glow)) drop-shadow(0 0 25px var(--blue2));
    }

    /* Texto final */
    .finalText{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.7);font-size:clamp(32px,7vw,96px);font-weight:900;
      background:linear-gradient(90deg,var(--blue),#fff,var(--blue2));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      opacity:0;transition:opacity .8s,transform .8s;text-align:center;white-space:nowrap;
      text-shadow:0 0 15px var(--blue2),0 0 30px var(--glow);
    }
    .finalText.show{opacity:1;transform:translate(-50%,-50%) scale(1)}

    .caption{position:absolute;bottom:5%;left:50%;transform:translateX(-50%);font-size:12px;color:rgba(255,255,255,.6)}
  </style>
</head>
<body>
<div class="stage" id="stage">
  <div class="gate" id="gate"><button id="startBtn">Toca para iniciar</button></div>

  <div class="char left"><div class="diamond"></div></div>
  <div class="char right"><div class="diamond"></div></div>

  <div id="lettersContainer"></div>
  <div id="finalText" class="finalText">Bleesd contigo</div>
  <div class="caption">Click/Tap para repetir • Diamantes lanzan llamas → “Lucas el más lindo” → Texto final</div>
</div>

<script>
const phrase = "Lucas el más lindo";
const stage = document.getElementById("stage");
const gate = document.getElementById("gate");
const startBtn = document.getElementById("startBtn");
const lettersContainer = document.getElementById("lettersContainer");
const finalText = document.getElementById("finalText");

const left = document.querySelector(".left");
const right = document.querySelector(".right");

let letters = [];
const spacing = 60;

function centerOf(el){
  const r = el.getBoundingClientRect();
  return {x:r.left+r.width/2,y:r.top+r.height/2};
}

function createLetters(){
  letters = [];
  lettersContainer.innerHTML = "";
  const cx = window.innerWidth/2;
  const cy = window.innerHeight/2 - 60;
  const totalW = (phrase.length-1)*spacing;
  const startX = cx-totalW/2;
  for(let i=0;i<phrase.length;i++){
    const ch = phrase[i];
    const el=document.createElement("div");
    el.className="letter";
    el.textContent=ch;
    const tx=startX+i*spacing;
    const ty=cy;
    el.dataset.tx=tx;el.dataset.ty=ty;
    el.style.left=tx+"px";
    el.style.top=ty+"px";
    lettersContainer.appendChild(el);
    letters.push(el);
  }
}

function spawnFlame(fromEl,targetEl){
  const start=centerOf(fromEl);
  const tx=parseFloat(targetEl.dataset.tx);
  const ty=parseFloat(targetEl.dataset.ty);

  const flame=document.createElement("div");
  flame.className="flame";
  flame.style.left=start.x+"px";
  flame.style.top=start.y+"px";
  stage.appendChild(flame);

  const duration=800+Math.random()*300;
  const startTime=performance.now();
  const dx=tx-start.x;
  const dy=ty-start.y;
  const arc=-120;

  function step(t){
    const p=Math.min(1,(t-startTime)/duration);
    const curx=start.x+dx*p;
    const cury=start.y+dy*p+arc*(1-Math.cos(Math.PI*p))/2;
    flame.style.left=curx+"px";
    flame.style.top=cury+"px";
    if(p<1) requestAnimationFrame(step);
    else{
      targetEl.classList.add("show");
      flame.remove();
    }
  }
  requestAnimationFrame(step);
}

async function launchSequence(){
  createLetters();
  for(let i=0;i<letters.length;i++){
    const L=letters[i];
    if(L.textContent===" "){await wait(150);continue;}
    const from=(i%2===0)?left:right;
    spawnFlame(from,L);
    await wait(180);
  }
  await wait(1500);
  fadeLetters();
  await wait(800);
  finalText.classList.add("show");
}

function fadeLetters(){
  for(const l of letters){
    l.style.opacity="0";
    l.style.transform="translate(-50%,-50%) scale(.7)";
  }
}

function wait(ms){return new Promise(r=>setTimeout(r,ms));}

function start(){gate.style.display="none";launchSequence();}
startBtn.addEventListener("click",start);

stage.addEventListener("click",()=>{lettersContainer.innerHTML="";finalText.classList.remove("show");launchSequence();});
</script>
</body>
</html>
